!function(t){if(t.emory)throw"emory global object is reserved";const e=function(){return this};e.prototype.namespace=function(){for(var t,e,n,r,o=arguments,i=0;i<o.length;i++)if(t=this,(r=o[i]).indexOf(".")>-1)for(e="emory"==(n=r.split("."))[0]?1:0;e<n.length;e++)t[n[e]]=t[n[e]]||{},t=t[n[e]];else t[r]=t[r]||{},t=t[r];return t},e.prototype.app=e,t.emory=new e}(window),function(t,e){const n=t.namespace("util"),o=e.Date.bind({});o.prototype=e.Date.prototype,o.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}},o.getMonthNumberFromName=function(t){for(var e=o.CultureInfo.monthNames,n=o.CultureInfo.abbreviatedMonthNames,r=t.toLowerCase(),i=0;i<e.length;i++)if(e[i].toLowerCase()==r||n[i].toLowerCase()==r)return i;return-1},o.getDayNumberFromName=function(t){for(var e=o.CultureInfo.dayNames,n=o.CultureInfo.abbreviatedDayNames,r=(o.CultureInfo.shortestDayNames,t.toLowerCase()),i=0;i<e.length;i++)if(e[i].toLowerCase()==r||n[i].toLowerCase()==r)return i;return-1},o.isLeapYear=function(t){return t%4==0&&t%100!=0||t%400==0},o.getDaysInMonth=function(t,e){return[31,o.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},o.getTimezoneOffset=function(t,e){return e?o.CultureInfo.abbreviatedTimeZoneDST[t.toUpperCase()]:o.CultureInfo.abbreviatedTimeZoneStandard[t.toUpperCase()]},o.getTimezoneAbbreviation=function(t,e){var n,r=e?o.CultureInfo.abbreviatedTimeZoneDST:o.CultureInfo.abbreviatedTimeZoneStandard;for(n in r)if(r[n]===t)return n;return null},o.prototype.clone=function(){return new o(this.getTime())},o.prototype.compareTo=function(t){if(isNaN(this))throw new Error(this);if(t instanceof o&&!isNaN(t))return this>t?1:this<t?-1:0;throw new TypeError(t)},o.prototype.equals=function(t){return 0===this.compareTo(t)},o.prototype.between=function(t,e){var n=this.getTime();return n>=t.getTime()&&n<=e.getTime()},o.prototype.addMilliseconds=function(t){return this.setMilliseconds(this.getMilliseconds()+t),this},o.prototype.addSeconds=function(t){return this.addMilliseconds(1e3*t)},o.prototype.addMinutes=function(t){return this.addMilliseconds(6e4*t)},o.prototype.addHours=function(t){return this.addMilliseconds(36e5*t)},o.prototype.addDays=function(t){return this.addMilliseconds(864e5*t)},o.prototype.addWeeks=function(t){return this.addMilliseconds(6048e5*t)},o.prototype.addMonths=function(t){var e=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+t),this.setDate(Math.min(e,this.getDaysInMonth())),this},o.prototype.addYears=function(t){return this.addMonths(12*t)},o.prototype.add=function(t){if("number"==typeof t)return this._orient=t,this;var e=t;return(e.millisecond||e.milliseconds)&&this.addMilliseconds(e.millisecond||e.milliseconds),(e.second||e.seconds)&&this.addSeconds(e.second||e.seconds),(e.minute||e.minutes)&&this.addMinutes(e.minute||e.minutes),(e.hour||e.hours)&&this.addHours(e.hour||e.hours),(e.month||e.months)&&this.addMonths(e.month||e.months),(e.year||e.years)&&this.addYears(e.year||e.years),(e.day||e.days)&&this.addDays(e.day||e.days),this},o._validate=function(t,e,n,r){if("number"!=typeof t)throw new TypeError(t+" is not a Number.");if(t<e||t>n)throw new RangeError(t+" is not a valid value for "+r+".");return!0},o.validateMillisecond=function(t){return o._validate(t,0,999,"milliseconds")},o.validateSecond=function(t){return o._validate(t,0,59,"seconds")},o.validateMinute=function(t){return o._validate(t,0,59,"minutes")},o.validateHour=function(t){return o._validate(t,0,23,"hours")},o.validateDay=function(t,e,n){return o._validate(t,1,o.getDaysInMonth(e,n),"days")},o.validateMonth=function(t){return o._validate(t,0,11,"months")},o.validateYear=function(t){return o._validate(t,1,9999,"seconds")},o.prototype.set=function(t){var e=t;return e.millisecond||0===e.millisecond||(e.millisecond=-1),e.second||0===e.second||(e.second=-1),e.minute||0===e.minute||(e.minute=-1),e.hour||0===e.hour||(e.hour=-1),e.day||0===e.day||(e.day=-1),e.month||0===e.month||(e.month=-1),e.year||0===e.year||(e.year=-1),-1!=e.millisecond&&o.validateMillisecond(e.millisecond)&&this.addMilliseconds(e.millisecond-this.getMilliseconds()),-1!=e.second&&o.validateSecond(e.second)&&this.addSeconds(e.second-this.getSeconds()),-1!=e.minute&&o.validateMinute(e.minute)&&this.addMinutes(e.minute-this.getMinutes()),-1!=e.hour&&o.validateHour(e.hour)&&this.addHours(e.hour-this.getHours()),-1!==e.month&&o.validateMonth(e.month)&&this.addMonths(e.month-this.getMonth()),-1!=e.year&&o.validateYear(e.year)&&this.addYears(e.year-this.getFullYear()),-1!=e.day&&o.validateDay(e.day,this.getFullYear(),this.getMonth())&&this.addDays(e.day-this.getDate()),e.timezone&&this.setTimezone(e.timezone),e.timezoneOffset&&this.setTimezoneOffset(e.timezoneOffset),this},o.prototype.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},o.prototype.isLeapYear=function(){var t=this.getFullYear();return t%4==0&&t%100!=0||t%400==0},o.prototype.isWeekday=function(){return!(this.is().sat()||this.is().sun())},o.prototype.getDaysInMonth=function(){return o.getDaysInMonth(this.getFullYear(),this.getMonth())},o.prototype.moveToFirstDayOfMonth=function(){return this.set({day:1})},o.prototype.moveToLastDayOfMonth=function(){return this.set({day:this.getDaysInMonth()})},o.prototype.moveToDayOfWeek=function(t,e){var n=(t-this.getDay()+7*(e||1))%7;return this.addDays(0===n?n+=7*(e||1):n)},o.prototype.moveToMonth=function(t,e){var n=(t-this.getMonth()+12*(e||1))%12;return this.addMonths(0===n?n+=12*(e||1):n)},o.prototype.getDayOfYear=function(){return Math.floor((this-new o(this.getFullYear(),0,1))/864e5)},o.prototype.getWeekOfYear=function(t){var e=this.getFullYear(),n=this.getMonth(),r=this.getDate(),i=t||o.CultureInfo.firstDayOfWeek,a=8-new o(e,0,1).getDay();8==a&&(a=1);var s=(o.UTC(e,n,r,0,0,0)-o.UTC(e,0,1,0,0,0))/864e5+1,u=Math.floor((s-a+7)/7);if(u===i){var c=8-new o(--e,0,1).getDay();u=2==c||8==c?53:52}return u},o.prototype.isDST=function(){return console.log("isDST"),"D"==this.toString().match(/(E|C|M|P)(S|D)T/)[2]},o.prototype.getTimezone=function(){return o.getTimezoneAbbreviation(this.getUTCOffset,this.isDST())},o.prototype.setTimezoneOffset=function(t){var e=this.getTimezoneOffset(),n=-6*Number(t)/10;return this.addMinutes(n-e),this},o.prototype.setTimezone=function(t){return this.setTimezoneOffset(o.getTimezoneOffset(t))},o.prototype.getUTCOffset=function(){var t,e=-10*this.getTimezoneOffset()/6;return e<0?(t=(e-1e4).toString())[0]+t.substr(2):"+"+(t=(e+1e4).toString()).substr(1)},o.prototype.getDayName=function(t){return t?o.CultureInfo.abbreviatedDayNames[this.getDay()]:o.CultureInfo.dayNames[this.getDay()]},o.prototype.getMonthName=function(t){return t?o.CultureInfo.abbreviatedMonthNames[this.getMonth()]:o.CultureInfo.monthNames[this.getMonth()]},o.prototype._toString=o.prototype.toString,o.prototype.toString=function(t){var e=this,n=function(t){return 1==t.toString().length?"0"+t:t};return isNaN(t)||parseInt(Number(t))!=t||isNaN(parseInt(t,10))||36!=parseInt(Number(t))?t&&t.replace?t.replace(/dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?/g,function(t){switch(t){case"hh":return n(e.getHours()<13?e.getHours():e.getHours()-12);case"h":return e.getHours()<13?e.getHours():e.getHours()-12;case"HH":return n(e.getHours());case"H":return e.getHours();case"mm":return n(e.getMinutes());case"m":return e.getMinutes();case"ss":return n(e.getSeconds());case"s":return e.getSeconds();case"yyyy":return e.getFullYear();case"yy":return e.getFullYear().toString().substring(2,4);case"dddd":return e.getDayName();case"ddd":return e.getDayName(!0);case"dd":return n(e.getDate());case"d":return e.getDate().toString();case"MMMM":return e.getMonthName();case"MMM":return e.getMonthName(!0);case"MM":return n(e.getMonth()+1);case"M":return e.getMonth()+1;case"t":return e.getHours()<12?o.CultureInfo.amDesignator.substring(0,1):o.CultureInfo.pmDesignator.substring(0,1);case"tt":return e.getHours()<12?o.CultureInfo.amDesignator:o.CultureInfo.pmDesignator;case"zzz":case"zz":case"z":return""}}):this._toString():(+new o).toString(t)},o.now=function(){return new o},o.today=function(){return o.now().clearTime()},o.prototype._orient=1,o.prototype.next=function(){return this._orient=1,this},o.prototype.last=o.prototype.prev=o.prototype.previous=function(){return this._orient=-1,this},o.prototype._is=!1,o.prototype.is=function(){return this._is=!0,this},Number.prototype._dateElement="day",Number.prototype.fromNow=function(){var t={};return t[this._dateElement]=this,o.now().add(t)},Number.prototype.ago=function(){var t={};return t[this._dateElement]=-1*this,o.now().add(t)},function(){for(var t,e=o.prototype,n=Number.prototype,r="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),i="january february march april may june july august september october november december".split(/\s/),a="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),s=function(t){return function(){return this._is?(this._is=!1,this.getDay()==t):this.moveToDayOfWeek(t,this._orient)}},u=0;u<r.length;u++)e[r[u]]=e[r[u].substring(0,3)]=s(u);for(var c=function(t){return function(){return this._is?(this._is=!1,this.getMonth()===t):this.moveToMonth(t,this._orient)}},l=0;l<i.length;l++)e[i[l]]=e[i[l].substring(0,3)]=c(l);for(var h=function(t){return function(){return"s"!=t.substring(t.length-1)&&(t+="s"),this["add"+t](this._orient)}},d=function(t){return function(){return this._dateElement=t,this}},f=0;f<a.length;f++)e[t=a[f].toLowerCase()]=e[t+"s"]=h(a[f]),n[t]=n[t+"s"]=d(t)}(),o.prototype.toJSONString=function(){return this.toString("yyyy-MM-ddThh:mm:ssZ")},o.prototype.toShortDateString=function(){return this.toString(o.CultureInfo.formatPatterns.shortDatePattern)},o.prototype.toLongDateString=function(){return this.toString(o.CultureInfo.formatPatterns.longDatePattern)},o.prototype.toShortTimeString=function(){return this.toString(o.CultureInfo.formatPatterns.shortTimePattern)},o.prototype.toLongTimeString=function(){return this.toString(o.CultureInfo.formatPatterns.longTimePattern)},o.prototype.getOrdinal=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},function(){o.Parsing={Exception:function(t){this.message="Parse error at '"+t.substring(0,10)+" ...'"}};for(var t=o.Parsing,e=t.Operators={rtoken:function(e){return function(n){var r=n.match(e);if(r)return[r[0],n.substring(r[0].length)];throw new t.Exception(n)}},token:function(t){return function(t){return e.rtoken(new RegExp("^s*"+t+"s*"))(t)}},stoken:function(t){return e.rtoken(new RegExp("^"+t))},until:function(t){return function(e){for(var n=[],r=null;e.length;){try{r=t.call(this,e)}catch(t){n.push(r[0]),e=r[1];continue}break}return[n,e]}},many:function(t){return function(e){for(var n=[],r=null;e.length;){try{r=t.call(this,e)}catch(t){return[n,e]}n.push(r[0]),e=r[1]}return[n,e]}},optional:function(t){return function(e){var n=null;try{n=t.call(this,e)}catch(t){return[null,e]}return[n[0],n[1]]}},not:function(e){return function(n){try{e.call(this,n)}catch(t){return[null,n]}throw new t.Exception(n)}},ignore:function(t){return t?function(e){return[null,t.call(this,e)[1]]}:null},product:function(){for(var t=arguments[0],n=Array.prototype.slice.call(arguments,1),r=[],o=0;o<t.length;o++)r.push(e.each(t[o],n));return r},cache:function(e){var n={},r=null;return function(o){try{r=n[o]=n[o]||e.call(this,o)}catch(t){r=n[o]=t}if(r instanceof t.Exception)throw r;return r}},any:function(){var e=arguments;return function(n){for(var r=null,o=0;o<e.length;o++)if(null!=e[o]){try{r=e[o].call(this,n)}catch(t){r=null}if(r)return r}throw new t.Exception(n)}},each:function(){var e=arguments;return function(n){for(var r=[],o=null,i=0;i<e.length;i++)if(null!=e[i]){try{o=e[i].call(this,n)}catch(e){throw new t.Exception(n)}r.push(o[0]),n=o[1]}return[r,n]}},all:function(){var t=arguments,e=e;return e.each(e.optional(t))},sequence:function(n,r,o){return r=r||e.rtoken(/^\s*/),o=o||null,1==n.length?n[0]:function(e){for(var i=null,a=null,s=[],u=0;u<n.length;u++){try{i=n[u].call(this,e)}catch(t){break}s.push(i[0]);try{a=r.call(this,i[1])}catch(t){a=null;break}e=a[1]}if(!i)throw new t.Exception(e);if(a)throw new t.Exception(a[1]);if(o)try{i=o.call(this,i[1])}catch(e){throw new t.Exception(i[1])}return[s,i?i[1]:e]}},between:function(t,n,o){o=o||t;var i=e.each(e.ignore(t),n,e.ignore(o));return function(t){var e=i.call(this,t);return[[e[0][0],r[0][2]],e[1]]}},list:function(t,n,r){return n=n||e.rtoken(/^\s*/),r=r||null,t instanceof Array?e.each(e.product(t.slice(0,-1),e.ignore(n)),t.slice(-1),e.ignore(r)):e.each(e.many(e.each(t,e.ignore(n))),px,e.ignore(r))},set:function(n,r,o){return r=r||e.rtoken(/^\s*/),o=o||null,function(i){for(var a=null,s=null,u=null,c=null,l=[[],i],h=!1,d=0;d<n.length;d++){u=null,s=null,a=null,h=1==n.length;try{a=n[d].call(this,i)}catch(t){continue}if(c=[[a[0]],a[1]],a[1].length>0&&!h)try{u=r.call(this,a[1])}catch(t){h=!0}else h=!0;if(h||0!==u[1].length||(h=!0),!h){for(var f=[],p=0;p<n.length;p++)d!=p&&f.push(n[p]);(s=e.set(f,r).call(this,u[1]))[0].length>0&&(c[0]=c[0].concat(s[0]),c[1]=s[1])}if(c[1].length<l[1].length&&(l=c),0===l[1].length)break}if(0===l[0].length)return l;if(o){try{u=o.call(this,l[1])}catch(e){throw new t.Exception(l[1])}l[1]=u[1]}return l}},forward:function(t,e){return function(n){return t[e].call(this,n)}},replace:function(t,e){return function(n){var r=t.call(this,n);return[e,r[1]]}},process:function(t,e){return function(n){var r=t.call(this,n);return[e.call(this,r[0]),r[1]]}},min:function(e,n){return function(r){var o=n.call(this,r);if(o[0].length<e)throw new t.Exception(r);return o}}},n=function(t){return function(){var e=null,n=[];if(arguments.length>1?e=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(e=arguments[0]),!e)return t.apply(null,arguments);for(var r=0,o=e.shift();r<o.length;r++)return e.unshift(o[r]),n.push(t.apply(null,e)),e.shift(),n}},i="optional not ignore cache".split(/\s/),a=0;a<i.length;a++)e[i[a]]=n(e[i[a]]);for(var s=function(t){return function(){return arguments[0]instanceof Array?t.apply(null,arguments[0]):t.apply(null,arguments)}},u="each any all".split(/\s/),c=0;c<u.length;c++)e[u[c]]=s(e[u[c]])}(),function(){var t=function(e){for(var n=[],r=0;r<e.length;r++)e[r]instanceof Array?n=n.concat(t(e[r])):e[r]&&n.push(e[r]);return n};o.Grammar={},o.Translator={hour:function(t){return function(){this.hour=Number(t)}},minute:function(t){return function(){this.minute=Number(t)}},second:function(t){return function(){this.second=Number(t)}},meridian:function(t){return function(){this.meridian=t.slice(0,1).toLowerCase()}},timezone:function(t){return function(){var e=t.replace(/[^\d\+\-]/g,"");e.length?this.timezoneOffset=Number(e):this.timezone=t.toLowerCase()}},day:function(t){var e=t[0];return function(){this.day=Number(e.match(/\d+/)[0])}},month:function(t){return function(){this.month=3==t.length?o.getMonthNumberFromName(t):Number(t)-1}},year:function(t){return function(){var e=Number(t);this.year=t.length>2?e:e+(e+2e3<o.CultureInfo.twoDigitYearMax?2e3:1900)}},rday:function(t){return function(){switch(t){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(t){t=t instanceof Array?t:[t];var e=new o;this.year=e.getFullYear(),this.month=e.getMonth(),this.day=1,this.hour=0,this.minute=0,this.second=0;for(var n=0;n<t.length;n++)t[n]&&t[n].call(this);if(this.hour="p"==this.meridian&&this.hour<13?this.hour+12:this.hour,this.day>o.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var r=new o(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?r.set({timezone:this.timezone}):this.timezoneOffset&&r.set({timezoneOffset:this.timezoneOffset}),r},finish:function(e){if(0===(e=e instanceof Array?t(e):[e]).length)return null;for(var n=0;n<e.length;n++)"function"==typeof e[n]&&e[n].call(this);if(this.now)return new o;var r,i,a,s=o.today();return null!=this.days||this.orient||this.operator?(a="past"==this.orient||"subtract"==this.operator?-1:1,this.weekday&&(this.unit="day",r=o.getDayNumberFromName(this.weekday)-s.getDay(),i=7,this.days=r?(r+a*i)%i:a*i),this.month&&(this.unit="month",r=this.month-s.getMonth(),i=12,this.months=r?(r+a*i)%i:a*i,this.month=null),this.unit||(this.unit="day"),null!=this[this.unit+"s"]&&null==this.operator||(this.value||(this.value=1),"week"==this.unit&&(this.unit="day",this.value=7*this.value),this[this.unit+"s"]=this.value*a),s.add(this)):(this.meridian&&this.hour&&(this.hour=this.hour<13&&"p"==this.meridian?this.hour+12:this.hour),this.weekday&&!this.day&&(this.day=s.addDays(o.getDayNumberFromName(this.weekday)-s.getDay()).getDate()),this.month&&!this.day&&(this.day=1),s.set(this))}};var e,n=o.Parsing.Operators,r=o.Grammar,i=o.Translator;r.datePartDelimiter=n.rtoken(/^([\s\-\.\,\/\x27]+)/),r.timePartDelimiter=n.stoken(":"),r.whiteSpace=n.rtoken(/^\s*/),r.generalDelimiter=n.rtoken(/^(([\s\,]|at|on)+)/);var a={};r.ctoken=function(t){var e=a[t];if(!e){for(var r=o.CultureInfo.regexPatterns,i=t.split(/\s+/),s=[],u=0;u<i.length;u++)s.push(n.replace(n.rtoken(r[i[u]]),i[u]));e=a[t]=n.any.apply(null,s)}return e},r.ctoken2=function(t){return n.rtoken(o.CultureInfo.regexPatterns[t])},r.h=n.cache(n.process(n.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),i.hour)),r.hh=n.cache(n.process(n.rtoken(/^(0[0-9]|1[0-2])/),i.hour)),r.H=n.cache(n.process(n.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),i.hour)),r.HH=n.cache(n.process(n.rtoken(/^([0-1][0-9]|2[0-3])/),i.hour)),r.m=n.cache(n.process(n.rtoken(/^([0-5][0-9]|[0-9])/),i.minute)),r.mm=n.cache(n.process(n.rtoken(/^[0-5][0-9]/),i.minute)),r.s=n.cache(n.process(n.rtoken(/^([0-5][0-9]|[0-9])/),i.second)),r.ss=n.cache(n.process(n.rtoken(/^[0-5][0-9]/),i.second)),r.hms=n.cache(n.sequence([r.H,r.mm,r.ss],r.timePartDelimiter)),r.t=n.cache(n.process(r.ctoken2("shortMeridian"),i.meridian)),r.tt=n.cache(n.process(r.ctoken2("longMeridian"),i.meridian)),r.z=n.cache(n.process(n.rtoken(/^(\+|\-)?\s*\d\d\d\d?/),i.timezone)),r.zz=n.cache(n.process(n.rtoken(/^(\+|\-)\s*\d\d\d\d/),i.timezone)),r.zzz=n.cache(n.process(r.ctoken2("timezone"),i.timezone)),r.timeSuffix=n.each(n.ignore(r.whiteSpace),n.set([r.tt,r.zzz])),r.time=n.each(n.optional(n.ignore(n.stoken("T"))),r.hms,r.timeSuffix),r.d=n.cache(n.process(n.each(n.rtoken(/^([0-2]\d|3[0-1]|\d)/),n.optional(r.ctoken2("ordinalSuffix"))),i.day)),r.dd=n.cache(n.process(n.each(n.rtoken(/^([0-2]\d|3[0-1])/),n.optional(r.ctoken2("ordinalSuffix"))),i.day)),r.ddd=r.dddd=n.cache(n.process(r.ctoken("sun mon tue wed thu fri sat"),function(t){return function(){this.weekday=t}})),r.M=n.cache(n.process(n.rtoken(/^(1[0-2]|0\d|\d)/),i.month)),r.MM=n.cache(n.process(n.rtoken(/^(1[0-2]|0\d)/),i.month)),r.MMM=r.MMMM=n.cache(n.process(r.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),i.month)),r.y=n.cache(n.process(n.rtoken(/^(\d\d?)/),i.year)),r.yy=n.cache(n.process(n.rtoken(/^(\d\d)/),i.year)),r.yyy=n.cache(n.process(n.rtoken(/^(\d\d?\d?\d?)/),i.year)),r.yyyy=n.cache(n.process(n.rtoken(/^(\d\d\d\d)/),i.year)),e=function(){return n.each(n.any.apply(null,arguments),n.not(r.ctoken2("timeContext")))},r.day=e(r.d,r.dd),r.month=e(r.M,r.MMM),r.year=e(r.yyyy,r.yy),r.orientation=n.process(r.ctoken("past future"),function(t){return function(){this.orient=t}}),r.operator=n.process(r.ctoken("add subtract"),function(t){return function(){this.operator=t}}),r.rday=n.process(r.ctoken("yesterday tomorrow today now"),i.rday),r.unit=n.process(r.ctoken("minute hour day week month year"),function(t){return function(){this.unit=t}}),r.value=n.process(n.rtoken(/^\d\d?(st|nd|rd|th)?/),function(t){return function(){this.value=t.replace(/\D/g,"")}}),r.expression=n.set([r.rday,r.operator,r.value,r.unit,r.orientation,r.ddd,r.MMM]),e=function(){return n.set(arguments,r.datePartDelimiter)},r.mdy=e(r.ddd,r.month,r.day,r.year),r.ymd=e(r.ddd,r.year,r.month,r.day),r.dmy=e(r.ddd,r.day,r.month,r.year),r.date=function(t){return(r[o.CultureInfo.dateElementOrder]||r.mdy).call(this,t)},r.format=n.process(n.many(n.any(n.process(n.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(t){if(r[t])return r[t];throw o.Parsing.Exception(t)}),n.process(n.rtoken(/^[^dMyhHmstz]+/),function(t){return n.ignore(n.stoken(t))}))),function(t){return n.process(n.each.apply(null,t),i.finishExact)});var s={},u=function(t){return s[t]=s[t]||r.format(t)[0]};r.formats=function(t){if(t instanceof Array){for(var e=[],r=0;r<t.length;r++)e.push(u(t[r]));return n.any.apply(null,e)}return u(t)},r._formats=r.formats(["yyyy-MM-ddTHH:mm:ss","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","d"]),r._start=n.process(n.set([r.date,r.time,r.expression],r.generalDelimiter,r.whiteSpace),i.finish),r.start=function(t){try{var e=r._formats.call({},t);if(0===e[1].length)return e}catch(t){}return r._start.call({},t)}}(),o._parse=o.parse,o.parse=function(t){var e=null;if(!t)return null;try{e=o.Grammar.start.call({},t)}catch(t){return null}return 0===e[1].length?e[0]:null},o.getParseFunction=function(t){var e=o.Grammar.formats(t);return function(t){var n=null;try{n=e.call({},t)}catch(t){return null}return 0===n[1].length?n[0]:null}},o.parseExact=function(t,e){return o.getParseFunction(e)(t)},n.date=o}(emory,window),function(t){const e=emory.namespace("util"),n=function(){},r=n.prototype;r.on=function(t,e){if(t&&e){var n=this._events=this._events||{},r=n[t]=n[t]||[];return-1==r.indexOf(e)&&r.push(e),this}},r.once=function(t,e){if(t&&e){this.on(t,e);var n=this._onceEvents=this._onceEvents||{};return(n[t]=n[t]||{})[e]=!0,this}},r.off=function(t,e){var n=this._events&&this._events[t];if(n&&n.length){var r=n.indexOf(e);return-1!=r&&n.splice(r,1),this}},r.emitEvent=function(t,e){var n=this._events&&this._events[t];if(n&&n.length){n=n.slice(0),e=e||[];for(var r=this._onceEvents&&this._onceEvents[t],o=0;o<n.length;o++){var i=n[o];r&&r[i]&&(this.off(t,i),delete r[i]),i.apply(this,e)}return this}},r.allOff=function(){delete this._events,delete this._onceEvents},e.eventEmitter=n}(),function(t){const e=emory.namespace("util.template"),n=(console.log,function(){function t(t){return t.replace(/([\{\}\(\)\[\]\|\^\$\-\+\?])/g,"\\$1")}var e={};function n(t){return t.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")}function r(t){return t.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}function o(t,e,n){var r,o;switch(n.length){case 0:r="",o="s";break;case 1:r="",o=n[0];break;case 2:r=n[0],o=n[1];break;default:throw{name:"EvaluationError",message:"pluralize got too many args"}}return t>1?o:r}function i(t,e,n){return n[(t-1)%n.length]}var a={html:n,htmltag:r,"html-attr-value":r,str:function(t){return null===t?"null":t.toString()},raw:function(t){return t},AbsUrl:function(t,e){return e.get("base-url")+"/"+t},"plain-url":function(t){return'<a href="'+r(t)+'">'+n(t)+"</a>"}},s=function(t,e,n){var r=n[0];if(void 0===r)throw{name:"EvaluationError",message:'The "test" predicate requires an argument.'};try{return e.get(r)}catch(t){if("UndefinedVariable"==t.name)return!1;throw t}},u=function(t){return 1==t},c=function(t){return t>1},l={singular:u,plural:c,"singular?":u,"plural?":c,"Debug?":function(t,e){return s(t,e,["debug"])}},h=function(){return{lookup:function(t){return[null,null]}}},d=function(t){return{lookup:function(e){return[t[e]||null,null]}}},f=function(t){return{lookup:function(e){return[t(e),null]}}},p=function(t){return{lookup:function(e){for(var n=0;n<t.length;n++){var r=t[n].name,o=t[n].func;if(e.slice(0,r.length)==r){var i=e.charAt(r.length);return[o,""===i?[]:e.split(i).slice(1)]}}return[null,null]}}},m=function(t){return{lookup:function(e){for(var n=0;n<t.length;n++){var r=t[n].lookup(e);if(r[0])return r}return[null,null]}}},y=function(t){var e={current_clause:[],Append:function(t){e.current_clause.push(t)},AlternatesWith:function(){throw{name:"TemplateSyntaxError",message:"{.alternates with} can only appear with in {.repeated section ...}"}},NewOrClause:function(t){throw{name:"NotImplemented"}}};return e},g=function(t){var e=y();return e.statements={default:e.current_clause},e.section_name=t.section_name,e.Statements=function(t){return t=t||"default",e.statements[t]||[]},e.NewOrClause=function(t){if(t)throw{name:"TemplateSyntaxError",message:"{.or} clause only takes a predicate inside predicate blocks"};e.current_clause=[],e.statements.or=e.current_clause},e},v=function(t){var e=g(t);return e.AlternatesWith=function(){e.current_clause=[],e.statements.alternate=e.current_clause},e},w=function(t){var e=y();return e.clauses=[],e.NewOrClause=function(t){t=t||[function(t){return!0},null],e.current_clause=[],e.clauses.push([t,e.current_clause])},e};function b(t,e,n){for(var r=0;r<t.length;r++){var o=t[r];"string"==typeof o?n(o):(0,o[0])(o[1],e,n)}}function M(t,e,n){var r=e.get(t.name);if(void 0===r)throw{name:"UndefinedVariable",message:t.name+" is not defined"};for(var o=0;o<t.formatters.length;o++){var i=t.formatters[o];r=(0,i[0])(r,e,i[1])}n(r)}function x(t,e,n){var r=t,o=e.pushName(r.section_name),i=!1;o&&(i=!0),o&&0===o.length&&(i=!1),i?(b(r.Statements(),e,n),e.pop()):(e.pop(),b(r.Statements("or"),e,n))}function T(t,e,n){for(var r=t,o=e.get("@"),i=0;i<r.clauses.length;i++){var a=r.clauses[i],s=a[0][0],u=a[0][1],c=a[1];if(s(o,e,u)){b(c,e,n);break}}}function _(t,e,n){var r=t,o=e.pushName(r.section_name);if(o&&o.length>0)for(var i=o.length-1,a=r.Statements(),s=r.Statements("alternate"),u=0;void 0!==e.next();u++)b(a,e,n),u!=i&&b(s,e,n);else b(r.Statements("or"),e,n);e.pop()}var S=/(repeated)?\s*(section)\s+(\S+)?/,E=/^or(?:\s+(.+))?/,D=/^if(?:\s+(.+))?/;function k(t){return t?"function"==typeof t?new f(t):void 0!==t.lookup?t:"object"==typeof t?new d(t):void 0:new h}function O(n,r){var u,c=k(r.more_formatters),h=p([{name:"pluralize",func:o},{name:"cycle",func:i}]),f=new m([c,d(a),h]),y=k(r.more_predicates),b=p([{name:"test",func:s}]),O=new m([y,d(l),b]);function N(t){var e=f.lookup(t);if(!e[0])throw{name:"BadFormatter",message:t+" is not a valid formatter"};return e}function C(t,e){var n=O.lookup(t);if(!n[0]){if(!e)throw{name:"BadPredicate",message:t+" is not a valid predicate"};n=[s,[t.slice(null,-1)]]}return n}u=void 0===r.default_formatter?"str":r.default_formatter;var I=r.format_char||"|";if(":"!=I&&"|"!=I)throw{name:"ConfigurationError",message:"Only format characters : and | are accepted"};var A=r.meta||"{}",j=A.length;if(j%2==1)throw{name:"ConfigurationError",message:A+" has an odd number of metacharacters"};for(var H,L=A.substring(0,j/2),F=A.substring(j/2,j),z=function(n,r){var o=e[n+r];if(void 0===o){var i="("+t(n)+"\\S.*?"+t(r)+"\n?)";o=new RegExp(i,"g")}return o}(L,F),U=g({}),P=[U],R=L.length,W=0;;){var Y;if(null===(H=z.exec(n)))break;if(Y=H[0],H.index>W){var q=n.slice(W,H.index);U.Append(q)}W=z.lastIndex;var J=!1;if("\n"==Y.slice(-1)&&(Y=Y.slice(null,-1),J=!0),"#"!=(Y=Y.slice(R,-R)).charAt(0)){if("."==Y.charAt(0)){var G,B,Z={"meta-left":L,"meta-right":F,space:" ",tab:"\t",newline:"\n"}[Y=Y.substring(1,Y.length)];if(void 0!==Z){U.Append(Z);continue}var X,V,$=Y.match(S);if($){var Q=$[1],K=$[3];Q?(B=_,G=v({section_name:K})):(B=x,G=g({section_name:K})),U.Append([B,G]),P.push(G),U=G;continue}var tt=Y.match(E);if(tt){V=(X=tt[1])?C(X,!1):null,U.NewOrClause(V);continue}var et=!1,nt=!1;if(Y.match(D))X=Y,et=!0;else{var rt=Y.split("?")[1]?Y.split("?")[1][0]:" ",ot=Y.split(rt).shift();"?"!=Y.charAt(Y.length-1)&&"?"!=ot.charAt(ot.length-1)||(X=Y,nt=!0)}if(et||nt){V=X?C(X,nt):null,(G=w()).NewOrClause(V),U.Append([T,G]),P.push(G),U=G;continue}if("alternates with"==Y){U.AlternatesWith();continue}if("end"==Y){if(P.pop(),!(P.length>0))throw{name:"TemplateSyntaxError",message:"Got too many {end} statements"};U=P[P.length-1];continue}}var it,at,st=Y.split(I);if(1==st.length){if(null===u)throw{name:"MissingFormatter",message:"This template requires explicit formatters."};it=[N(u)],at=Y}else{it=[];for(var ut=1;ut<st.length;ut++)it.push(N(st[ut]));at=st[0]}U.Append([M,{name:at,formatters:it}]),J&&U.Append("\n")}}if(U.Append(n.slice(W)),1!==P.length)throw{name:"TemplateSyntaxError",message:"Got too few {end} statements"};return U}function N(t,e){if(!(this instanceof N))return new N(t,e);this._options=e||{},this._program=O(t,this._options)}N.prototype.render=function(t,e){var n,r,o;"function"!=typeof t.get&&(n=t,r=this._options.undefined_str,o=[{context:n,index:-1}],t={pushName:function(t){if(null==t)return null;var e,n=t.split(".");if("@"==t)e=o[o.length-1].context;else if(n.length>1)for(t=n.shift(),e=o[o.length-1].context[t];n.length;)e=e[t=n.shift()]||null;else e=o[o.length-1].context[t]||null;return o.push({context:e,index:-1}),e},pop:function(){o.pop()},next:function(){var t=o[o.length-1];-1==t.index&&(t={context:null,index:0},o.push(t));var e=o[o.length-2].context;if(t.index!=e.length)return t.context=e[t.index++],!0;o.pop()},_Undefined:function(){return void 0===r?void 0:r},_LookUpStack:function(t){for(var e=o.length-1;;){var n=o[e];if("@index"==t){if(-1!=n.index)return n.index}else{var r=n.context;if("object"==typeof r){var i=r[t];if(void 0!==i)return i}}if(--e<=-1)return this._Undefined(t)}},get:function(t){if("@"==t)return o[o.length-1].context;var e,n,r=/\|\|/.test(t)?t.replace(/\s\|\|\s/g,"||").split("||"):null,i=t.split(".");if(!r){if(void 0===(e=this._LookUpStack(i[0])))return this._Undefined();for(a=1;a<i.length;a++)if(void 0===(e=e[i[a]]))return this._Undefined();return e}n=o[o.length-1].context;for(var a=0;a<r.length;a++)if(n[r[a]])return n[r[a]]}}),b(this._program.Statements(),t,e)},N.prototype.expand=function(t){var e=[];return this.render(t,function(t){e.push(t)}),e.join("")};var C=/^([a-zA-Z\-]+):\s*(.*)/,I=new RegExp(["meta","format-char","default-formatter","undefined-str"].join("|"));return{Template:N,HtmlEscape:n,HtmlTagEscape:r,FunctionRegistry:h,SimpleRegistry:d,CallableRegistry:f,ChainedRegistry:m,fromString:function(t,e){for(var n={},r=0,o=0,i=!1;;){var a=!1;if(-1==(o=t.indexOf("\n",r)))break;var s=t.slice(r,o);r=o+1;var u=s.match(C);if(null!==u){var c=u[1].toLowerCase(),l=u[2];c.match(I)&&(c=c.replace("-","_"),l=l.replace(/^\s+/,"").replace(/\s+$/,""),"default_formatter"==c&&"none"==l.toLowerCase()&&(l=null),n[c]=l,a=!0,i=!0)}if(!a)break}var h=i?t.slice(r):t;for(var d in e)n[d]=e[d];return N(h,n)},expand:function(t,e,n){return N(t,n).expand(e)},_Section:g}}()),r=["singular","plural","singular?","plural?","Debug?"],o=["html","htmltag","html-attr-value","str","raw","AbsUrl","plain-url"],i=/"|'/g,a=function(t){return!Array.isArray(t)&&t-parseFloat(t)>=0},s=function(t){const e=String(t).split(/([^\"]\S*|\".+?\")\s*/),n=[];for(let t in e)e[t].length>0&&('"'===e[t].charAt(0)?n.push(e[t].substring(1,e[t].length-1)):n.push(e[t]));return n},u=function(t,e){const n=[];return e.forEach(function(e){if(i.test(e))n.push(e.slice(1,-1));else{const r=t.get(e),o=t._LookUpStack(e),i=a(o),s=a(r);void 0!==o&&""!==o||i?e=o:(void 0!==r&&""!==r||s)&&(e=r),n.push(e)}}),n},c=function(){this.predicates={},this.formatters={};const t=this,e=function(e){let i,a=e;return Array.isArray(a)&&(a=a.join("")),(i=n.Template(a,{more_formatters:function(t){const e=t.indexOf(" "),n=this;let r=null,i=[];if(-1===e?r=t:(i=s(t),r=i.shift()),-1===o.indexOf(r))return function(t,e){let o=[];return i.length>0&&(o=u(e,i)),o.unshift(e),o.unshift(t),n.formatters[r].apply(null,o)}}.bind(t),more_predicates:function(t){const e=t.indexOf(" "),n=t.indexOf("?"),o=this;let i=null,a=[];if(-1===n?i=t:(i=t.split("?")[0],e===n+1&&(t=t.split("?")[1].slice(1)),a=s(t)),-1===r.indexOf(i))return function(t,e){let n=[];return a.length>0&&(n=u(e,a)),n.unshift(e),n.unshift(t),o.predicates[i].apply(null,n)}}.bind(t)})).expand.bind(i)};return e.addFormatter=function(t,e){this.formatters[t]&&console.log('JSONTemplate formatter:"'+t+'" is already defined.'),"function"==typeof e?this.formatters[t]=e:console.log('JSONTemplate formatter:"'+t+'" must include a function')}.bind(this),e.addPredicate=function(t,e){predicates[t]&&console.log('JSONTemplate predicate:"'+t+'" is already defined.'),"function"==typeof e?predicates[t]=e:console.log('JSONTemplate predicate:"'+t+'" must include a function')}.bind(this),e};e.jsontemplate=n,e.getInstance=function(){return new c},e.template=new c}(),function(t,e){const n=t.namespace("util");function r(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})}var o=setTimeout;function i(){}function a(t){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(t,this)}function s(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,a._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void c(e.promise,t)}u(e.promise,r)}else(1===t._state?u:c)(e.promise,t._value)})):t._deferreds.push(e)}function u(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof a)return t._state=3,t._value=e,void l(t);if("function"==typeof n)return void d((r=n,o=e,function(){r.apply(o,arguments)}),t)}t._state=1,t._value=e,l(t)}catch(e){c(t,e)}var r,o}function c(t,e){t._state=2,t._value=e,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&a._immediateFn(function(){t._handled||a._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)s(t,t._deferreds[e]);t._deferreds=null}function h(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function d(t,e){var n=!1;try{t(function(t){n||(n=!0,u(e,t))},function(t){n||(n=!0,c(e,t))})}catch(t){if(n)return;n=!0,c(e,t)}}a.prototype.catch=function(t){return this.then(null,t)},a.prototype.then=function(t,e){var n=new this.constructor(i);return s(this,new h(t,e,n)),n},a.prototype.finally=r,a.all=function(t){return new a(function(e,n){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var o=r.length;function i(t,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){i(t,e)},n)}r[t]=a,0==--o&&e(r)}catch(t){n(t)}}for(var a=0;a<r.length;a++)i(a,r[a])})},a.resolve=function(t){return t&&"object"==typeof t&&t.constructor===a?t:new a(function(e){e(t)})},a.reject=function(t){return new a(function(e,n){n(t)})},a.race=function(t){return new a(function(e,n){for(var r=0,o=t.length;r<o;r++)t[r].then(e,n)})},a._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){o(t,0)},a._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},"Promise"in e?n.promise=e.Promise:(n.promise=a.bind({}),n.promise.prototype=a.prototype),n.promise.prototype.finally||(n.promise.prototype.finally=r)}(emory,window),function(t){const e=emory.namespace("util.random");e.uuid=function(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)})},e.randomFnName=function(){return"fn_"+e.uuid().replace(/-/gi,"_")}}(),function(t){const e=t.namespace("ajax");e.get=function(e){return new t.namespace("ajax").request().send(Object.assign({},e,{method:"GET"}))},e.post=function(e){return new t.namespace("ajax").request().send(Object.assign({},e,{method:"POST"}))}}(emory),function(t){const e=t.namespace("ajax");e.jsonp=function(n,r){r=r||{};const o=t.namespace("ajax.util"),i=t.namespace("util"),a=t.namespace("util.random"),s=r.callbackFn||a.randomFnName(),u=r.callbackParam||"callback",c=r.timeout?r.timeout:15e3,l=document.getElementsByTagName("script")[0]||document.head,h=r.data||{},d=r.returnAsPromise||!0,f=i.promise;let p,m,y,g,v;return y=function(){p&&p.parentNode&&p.parentNode.removeChild(p),window[s]=o.noop,m&&clearTimeout(m)},v=new f(function(t,r){c&&(m=setTimeout(function(){y(),r(new Error("Timeout"))},c)),window[s]=function(e){y(),t(e)},n=(n+=(~n.indexOf("?")?"&":"?")+u+"="+encodeURIComponent(s)+(0!==Object.keys(h).length?e.param(h):"")).replace("?&","?"),(p=document.createElement("script")).src=n,setTimeout(function(){l.parentNode.insertBefore(p,l)},1),g=function(){window[s]&&(y(),r(new Error("Canceled")))}}),d?v:{promise:v,cancel:g}}}(emory),function(t){const e=t.namespace("ajax");e.request=function(){function e(){}return e.DEFAULT_CONTENT_TYPE="application/x-www-form-urlencoded; charset=UTF-8",e.DEFAULTS={method:"GET",data:null,headers:{},async:!0,username:null,password:null,withCredentials:!1,returnType:"auto",sendAsFormData:!1},e.URL_METHODS=["GET","HEAD","OPTIONS"],e.FORM_METHOS=["POST","PUT","DELETE","PATCH"],e.VALID_METHODS=e.URL_METHODS.concat(e.FORM_METHOS),e.prototype.send=function(n){const r=t.namespace("util").promise;return n=Object.assign({},e.DEFAULTS,n),new r((o=this,function(r,i){var a,s,u,c,l;if(o._xhr=l=new XMLHttpRequest,o.options=n,XMLHttpRequest)if("string"==typeof n.url&&0!==n.url.length)if(e.VALID_METHODS.indexOf(n.method)<0)o._handleError("method",i,null,"Method "+n.method+" is an invalid method.");else{for(s in l.onload=function(){var t;o._detachWindowUnload();try{t=o._getResponseData()}catch(t){return void o._handleError("parse",i,null,"invalid response")}return r({url:o._getResponseUrl(),status:l.status,statusText:l.statusText,responseText:l.responseText,response:t,headers:o._getHeaders(),xhr:l})},l.onerror=function(){return o._handleError("error",i)},l.ontimeout=function(){return o._handleError("timeout",i)},l.onabort=function(){return o._handleError("abort",i)},o._attachWindowUnload(),o.constructor.URL_METHODS.indexOf(n.method)>-1&&null!=n.data&&(n.url+=(~n.url.indexOf("?")?"&":"?")+(0!==Object.keys(n.data).length?t.namespace("ajax.util").param(n.data):""),n.url=n.url.replace("?&","?")),l.open(n.method,n.url,n.async,n.username,n.password),n.withCredentials&&(l.withCredentials=!0),null==n.data||n.headers["Content-Type"]||n.sendAsFormData||(n.headers["Content-Type"]=o.constructor.DEFAULT_CONTENT_TYPE),u=n.headers)c=u[s],l.setRequestHeader(s,c);try{if(!n.headers["Content-Type"]||!(n.headers["Content-Type"].indexOf("application/json")>-1||n.headers["Content-Type"].indexOf("text/xml")>-1))return null!=n.data&&n.sendAsFormData&&!n.headers["Content-Type"]?l.send(t.namespace("ajax.util").formData(n.data)):o.constructor.FORM_METHOS.indexOf(n.method)>-1?n.headers["Content-Type"].indexOf("application/x-www-form-urlencoded")?l.send(t.namespace("ajax.util").param(n.data)):l.send(n.data):l.send();if(n.headers["Content-Type"].indexOf("application/json")>-1&&"object"==typeof n.data)return l.send(JSON.stringify(n.data));if(n.headers["Content-Type"].indexOf("text/xml")>-1&&"object"==typeof n.data)return l.send((new XMLSerializer).serializeToString(n.data))}catch(t){return a=t,o._handleError("send",i,null,a.toString())}}else o._handleError("url",i,null,"URL is a required parameter");else o._handleError("browser",i,null,"browser doesn't support XMLHttpRequest")}));var o},e.prototype.getXHR=function(){return this._xhr},e.prototype._attachWindowUnload=function(){if(this._unloadHandler=this._handleWindowUnload.bind(this),window.attachEvent)return window.attachEvent("onunload",this._unloadHandler)},e.prototype._detachWindowUnload=function(){if(window.detachEvent)return window.detachEvent("onunload",this._unloadHandler)},e.prototype._getHeaders=function(){return t.namespace("ajax.util").parseHeaders(this._xhr.getAllResponseHeaders())},e.prototype._getResponseData=function(){let t;t="string"==typeof this._xhr.responseText?this._xhr.responseText:"";const e=(this._xhr.getResponseHeader("Content-Type")||"").split(";")[0],n=new DOMParser;return"auto"===this.options.returnType?e.indexOf("application/json")>-1?t=JSON.parse(t+""):e.indexOf("text/xml")>-1&&(t=n.parseFromString(t+"","text/xml")):"json"===this.options.returnType.toLowerCase()?t=JSON.parse(t+""):"xml"===this.options.returnType.toLowerCase()&&(t=n.parseFromString(t+"","text/xml")),t},e.prototype._getResponseUrl=function(){return null!=this._xhr.responseURL?this._xhr.responseURL:/^X-Request-URL:/m.test(this._xhr.getAllResponseHeaders())?this._xhr.getResponseHeader("X-Request-URL"):""},e.prototype._handleError=function(t,e,n,r){return this._detachWindowUnload(),e({reason:t,status:n||this._xhr.status,statusText:r||this._xhr.statusText,xhr:this._xhr})},e.prototype._handleWindowUnload=function(){return this._xhr.abort()},e}(),e.get=function(t){return(new e.request).send(Object.assign({},t,{method:"GET"}))},e.post=function(t){return(new e.request).send(Object.assign({},t,{method:"POST"}))}}(emory),function(t){const e=emory.namespace("ajax.util");e.noop=function(){},e.param=function(t){var e=[],n=function(t,n){n=null===(n="function"==typeof n?n():n)?"":void 0===n?"":n instanceof Date?n.toISOString():n,e[e.length]=encodeURIComponent(t)+"="+encodeURIComponent(n)},r=function(t,o){var i,a,s;if(t)if(Array.isArray(o))for(i=0,a=o.length;i<a;i++)r(t+"["+("object"==typeof o[i]&&o[i]?i:"")+"]",o[i]);else if("[object Object]"===String(o))for(s in o)r(t+"["+s+"]",o[s]);else n(t,o);else if(Array.isArray(o))for(i=0,a=o.length;i<a;i++)n(o[i].name,o[i].value);else for(s in o)r(s,o[s]);return e};return r("",t).join("&")},e.formData=function(t){let e=new FormData;if("[object Object]"===String(t)&&t.hasOwnProperty){for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];null==r?e.append(n,""):r instanceof Date?e.append(n,r.toISOString()):"[object Object]"===String(r)||Array.isArray(r)?e.append(n,JSON.stringify(r)):e.append(n,r)}}else t.tagName&&"form"==t.tagName.toLowerCase()&&(e=new FormData(t));return e},e.parseHeaders=function(t){if(!t)return{};let e={};return t.toString().trim().split("\n").forEach(function(t){let n=t.indexOf(":"),r=t.slice(0,n).trim().toLowerCase(),o=t.slice(n+1).trim();void 0===e[r]?e[r]=o:isArray(e[r])?e[r].push(o):e[r]=[e[r],o]}),e}}(),function(t){const e=t.namespace("first"),n="first.urls",r="ajax";e.department=function(e){const o=t.namespace(n);return t.namespace(r).jsonp(o.department(e))},e.profile=function(e){return t.namespace("util").promise.all([function(e){const o=t.namespace(n);return t.namespace(r).jsonp(o.profile(e))}(e),function(e){const o=t.namespace(n);return t.namespace(r).jsonp(o.professional(e))}(e),function(e){const o=t.namespace(n);return t.namespace(r).jsonp(o.teaching(e))}(e),function(e){const o=t.namespace(n);return t.namespace(r).jsonp(o.publications(e))}(e)]).then(function(t){return{profile:t[0][0],professional:t[1],teaching:t[2],publications:t[3]}}).catch(function(t){console.log(t)})}}(emory),function(t){const e=emory.namespace("first.urls");e.department=function(t){return"https://api.app.emory.edu/api/users/department?code="+(Array.isArray(t)?t.join("&code="):t)},e.profile=function(t){return"https://api.app.emory.edu/api/user/"+t},e.professional=function(t){return"https://api.app.emory.edu/api/user/"+t+"/professional-activities"},e.teaching=function(t){return"https://api.app.emory.edu/api/user/"+t+"/teaching-activities"},e.publications=function(t){return"https://api.app.emory.edu/api/user/"+t+"/publications"}}(),function(t,e){const n=t.namespace("dom"),r=t.namespace("util").eventEmitter;function o(t,e){for(var n in e)t[n]=e[n];return t}var i=Array.prototype.slice;function a(t,e,n){if(!(this instanceof a))return new a(t,e,n);var r,s=t;("string"==typeof t&&(s=document.querySelectorAll(t)),s)?(this.elements=(r=s,Array.isArray(r)?r:"object"==typeof r&&"number"==typeof r.length?i.call(r):[r]),this.options=o({},this.options),"function"==typeof e?n=e:o(this.options,e),n&&this.on("always",n),this.getImages(),setTimeout(this.check.bind(this))):console.error("Bad element for imagesLoaded "+(s||t))}a.prototype=Object.create(r.prototype),a.prototype.options={},a.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},a.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&s[e]){for(var n=t.querySelectorAll("img"),r=0;r<n.length;r++){var o=n[r];this.addImage(o)}if("string"==typeof this.options.background){var i=t.querySelectorAll(this.options.background);for(r=0;r<i.length;r++){var a=i[r];this.addElementBackgroundImages(a)}}}};var s={1:!0,9:!0,11:!0};function u(t){this.img=t}function c(t,e){this.url=t,this.element=e,this.img=new Image}a.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var n=/url\((['"])?(.*?)\1\)/gi,r=n.exec(e.backgroundImage);null!==r;){var o=r&&r[2];o&&this.addBackground(o,t),r=n.exec(e.backgroundImage)}},a.prototype.addImage=function(t){var e=new u(t);this.images.push(e)},a.prototype.addBackground=function(t,e){var n=new c(t,e);this.images.push(n)},a.prototype.check=function(){var t=this;function e(e,n,r){setTimeout(function(){t.progress(e,n,r)})}this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach(function(t){t.once("progress",e),t.check()}):this.complete()},a.prototype.progress=function(t,e,n){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&console&&console.log("progress: "+n,t,e)},a.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this])},u.prototype=Object.create(r.prototype),u.prototype.check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},u.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},u.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},u.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},u.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},u.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},u.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},c.prototype=Object.create(u.prototype),c.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},c.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},c.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},n.imagesLoaded=a,n.allImagesLoaded=function(t){if("function"!=typeof t)throw"Callback must be a function.";return a(e.body,t)}}(emory,document),function(t,e){const n=t.namespace("dom.mediaQuery"),r={};n.matchs=function(t){return r[t]||(r[t]=window.matchMedia(t)),r[t].matches},n.addListener=function(t,e){r[t]||(r[t]=window.matchMedia(t)),r[t].matches&&e.call({}),r[t].addListener(e)},n.removeListener=function(t,e){r[t]&&r[t].removeListener(e)}}(emory,window),function(t,e){t.namespace("dom").ready=function(t){if("function"!=typeof t)throw"Callback must be a function.";"loading"===e.readyState?e.addEventListener("DOMContentLoaded",t):t()}}(emory,document),function(t){t.namespace("trumba").getJSON=function(e){return(0,t.namespace("ajax").get)({url:"https://www.trumba.com/calendars/"+e+".json"}).then(function(t){return t.response?t.response:[]})}}(emory),function(t){const e=t.namespace("trumba"),n=t.namespace("util.template").getInstance(),r={};n.addFormatter("trumbaUrl",function(t,e,n){return""==n?t.permaLinkUrl:n+"?trumbaEmbed=eventid%3D"+t.eventId+"%26view%3Devent%26-childview%3D"}),n.addFormatter("customDateTimeFormat",function(e,n,r){return t.namespace("util").date.parse(e).toString(r)}),n.addFormatter("customDateTimeRangeFormat",function(e,n,r,o,i,a){var s=t.namespace("util").date.parse(e[o]),u=t.namespace("util").date.parse(e[i]);return"000000"===u.toString("HHmmss")&&(u=u.addSeconds(-1)),s.toString(r)==u.toString(r)||t.namespace("util").date.parse(e[o]).add({days:1}).equals(t.namespace("util").date.parse(e[i]))?s.toString(r):s.toString(r)+"-"+u.toString(r)}),n.addFormatter("trumbaGetFirstTopic",function(t,e){let n="";t.customFields&&Array.isArray(t.customFields)&&t.customFields.forEach(function(t){"University Event Topic"===t.label&&(n=t.value.split(",")[0])})}),e.registerTemplate=function(t,e){r[t]=n(e)},e.applyTemplate=function(t,n){return e.getJSON(n).then(function(e){return r[t](e)})}}(emory),emory.trumba.registerTemplate("default","{.repeated section @}FOUND EVENT: {eventID}{.end}"),emory.trumba.applyTemplate("default","_Emory-edu-Homepage");